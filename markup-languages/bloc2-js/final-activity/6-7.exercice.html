<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="UTF-8">
    <title>Formulario ejercicios 6 y 7</title>
    <style>
        fieldset {margin: 10px;padding: 10px; border: 10px;}
        fieldset {display: inline-block; vertical-align: middle; background: #eee;}
        label {display: block; font-weight: bold; margin: 5px; padding: 5px; border: 5px;}
    </style>
</head>
<body>

<header>
    <h1>Nuestros usuarios son deportistas</h1>
</header>

<main>
    <form method="post">
        <fieldset> <legend>¡Apúntate para practicar deporte!</legend>
            <label>Nombre y apellido/s: <input type="text" id="fullname" title="Introduce tu nombre" placeholder="P.Ej.: Jorge Gutiérrez" required /></label>
            <label>Edad: <input type="number" id="age" title="Edad" required/></label>
            <label>Deporte: <input type="text" id="sport" title="Introduce tu deporte" placeholder="Fútbol, Baloncesto, Atletismo, etc." required/></label>
            <label>Color de camiseta de tu equipo: <input type="text" id="shirt-color" title="Introduce el color de camiseta" placeholder="Rojo, rayas azules y blancas, etc." required/></label>
            <label>Años practicando deporte: <input type="number" id="years" title="Número de años" placeholder="P.EJ.: 3" required/></label>
        </fieldset>
        <br>
        <button type="button" onclick="magic()">Envía el formulario</button>
    </form>
</main>

<script>
    function magic() {

        let sport = (document.getElementById("sport").value);
        let newItem = [];
        newItem.push(document.getElementById("fullname").value);
        newItem.push(document.getElementById("age").value);
        newItem.push(document.getElementById("shirt-color").value);
        newItem.push(document.getElementById("years").value);

        let sections = [];
        for (let i=0; i<document.getElementsByTagName("h2"); i++){
            sections.push(document.getElementsByTagName("h2")[i]);
        }

        if(!sections.includes(sport)){

            let newContent = `<li>${newItem[0]}, ${newItem[1]} años, color de camiseta ${newItem[2]}. ${newItem[3]} años practicando deporte.</li>`;

            let newSection = document.createElement('section');
            newSection.setAttribute("id", `${sport}`);
            let newHeading = document.createElement("h2");
            let newTextHeading = document.createTextNode(`${sport}`);
            newHeading.appendChild(newTextHeading);
            newSection.appendChild(newHeading);

            document.getElementById(`${sport}`).appendChild(newContent);
            document.getElementsByTagName("body")[0].appendChild(newSection);

        } else {
            alert("under construction!")
        }

    }
</script>

</body>
</html>